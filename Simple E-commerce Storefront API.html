<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive E-Commerce API Explorer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Nordic Calm (Cool Blues, Soft Grays, Mint Green Accent) -->
    <!-- Application Structure Plan: A two-column layout is used. The left column serves as a persistent navigation menu listing all API endpoints. The right column is the content display area. Clicking an endpoint in the navigation instantly shows its detailed documentation and an interactive "Try It Out" console in the content area. This structure was chosen because it's a standard, highly intuitive pattern for API documentation (like Postman or Swagger UI), allowing developers to quickly switch between endpoints without losing context, which is superior to scrolling through a long, linear document. -->
    <!-- Visualization & Content Choices: The API documentation's content is organized into distinct, interactive sections. Goal: Inform/Organize. Method: Structured HTML with Tailwind CSS, using badges for HTTP methods and styled blocks for code. Interaction: Clicking navigation links to switch content panes, and using form inputs/buttons in the "Try It Out" sections to simulate API calls and see dynamic JSON responses. Justification: This approach turns passive documentation into an active learning tool, allowing for direct engagement and understanding of the API's behavior without needing external tools. No charts are necessary as the data is descriptive, not quantitative in a way that requires visualization. Library: Vanilla JavaScript for all logic. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .method-badge {
            font-size: 0.7rem;
            font-weight: 700;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .method-get { background-color: #38bdf8; color: #075985; }
        .method-post { background-color: #4ade80; color: #166534; }
        
        .api-nav-link.active {
            background-color: #e0f2fe;
            color: #0c4a6e;
            font-weight: 600;
            border-left-color: #0ea5e9;
        }
        .api-nav-link:hover {
             background-color: #f0f9ff;
        }

        .api-content-panel {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e2e8f0; }
        ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #64748b; }

        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            font-family: 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', "Liberation Mono", "Courier New", monospace;
            border-radius: 0.5rem;
            padding: 1rem;
            height: 16rem;
            overflow-x: auto;
        }
        .code-block .token-key { color: #93c5fd; }
        .code-block .token-string { color: #a5f3fc; }
        .code-block .token-number { color: #fef08a; }
        .code-block .token-boolean { color: #d8b4fe; }
        .code-block .token-info { color: #64748b; }
    </style>
</head>
<body class="text-slate-700">

    <div class="flex flex-col md:flex-row min-h-screen">
        <!-- Sidebar Navigation -->
        <aside class="w-full md:w-1/4 lg:w-1/5 bg-white/80 backdrop-blur-sm border-r border-slate-200 p-6">
            <div class="flex items-center gap-3 mb-1">
                <div class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center text-white font-bold text-xl">E</div>
                <h1 class="text-xl font-bold text-slate-800">E-Commerce API</h1>
            </div>
            <p class="text-sm text-slate-500 mb-10 pl-14 -mt-4">Interactive Explorer</p>
            
            <nav id="api-nav" class="space-y-2">
                <div>
                    <h2 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 px-3">Products</h2>
                    <a href="#" data-target="get-products" class="api-nav-link active flex items-center text-slate-600 py-2.5 px-3 rounded-md border-l-4 border-transparent transition-colors duration-200">
                        <span class="method-get method-badge mr-3">GET</span>
                        <span>/products</span>
                    </a>
                </div>
                <div>
                    <h2 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2 mt-6 px-3">Shopping Cart</h2>
                    <a href="#" data-target="get-cart" class="api-nav-link flex items-center text-slate-600 py-2.5 px-3 rounded-md border-l-4 border-transparent transition-colors duration-200">
                        <span class="method-get method-badge mr-3">GET</span>
                        <span>/cart</span>
                    </a>
                    <a href="#" data-target="post-cart-add" class="api-nav-link flex items-center text-slate-600 py-2.5 px-3 rounded-md border-l-4 border-transparent transition-colors duration-200">
                        <span class="method-post method-badge mr-3">POST</span>
                        <span>/cart/add</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="w-full md:w-3/4 lg:w-4/5 p-6 md:p-10 overflow-y-auto">
            
            <!-- Endpoint: Get Products -->
            <div id="get-products" class="api-content-panel">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900">Get Products by Category</h2>
                    <p class="mt-2 text-slate-600 max-w-3xl">This section provides an interactive way to explore the `/products` endpoint. You can retrieve a list of all available products, and optionally filter them by a specific category. Use the "Try It Out" console below to simulate a request and see what the API response would look like.</p>
                </div>
                
                <div class="flex items-center space-x-3 mb-4">
                    <span class="method-get method-badge px-3 py-1 text-sm">GET</span>
                    <code class="text-lg font-mono bg-slate-100 text-slate-700 px-4 py-2 rounded-md">/products</code>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Query Parameters</h3>
                    <div class="text-sm">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-2 items-start py-2">
                            <div class="font-semibold text-slate-800">category <span class="font-normal text-slate-500 ml-1">(optional)</span></div>
                            <div class="md:col-span-3 text-slate-600">A <code class="bg-slate-200 text-slate-800 px-1.5 py-0.5 text-xs rounded">string</code> to filter products. Valid options are "electronics", "apparel", "books", or "homegoods". If omitted, all products are returned.</div>
                        </div>
                    </div>
                </div>

                <div class="mt-10 p-6 bg-white rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold text-sky-800 mb-4">Try It Out</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="get-products-category" class="block text-sm font-medium text-slate-700 mb-2">Category</label>
                            <input type="text" id="get-products-category" placeholder="e.g., electronics" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-sky-300 focus:border-sky-400 transition">
                            <button id="send-get-products" class="mt-4 w-full bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-all duration-200 transform hover:scale-[1.02]">Send Request</button>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-slate-700 mb-2">Response</p>
                            <pre class="code-block"><code id="get-products-response"><span class="token-info">{
  "info": "Click 'Send Request' to see a sample response."
}</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Endpoint: Get Cart -->
            <div id="get-cart" class="api-content-panel hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900">Get Cart Contents</h2>
                    <p class="mt-2 text-slate-600 max-w-3xl">This section allows you to view the contents of the virtual shopping cart. The cart's state is maintained for your session in this explorer. Use the "Try It Out" console to fetch the current items in the cart. Add items using the `POST /cart/add` endpoint first to see a populated cart.</p>
                </div>
                <div class="flex items-center space-x-3 mb-4">
                    <span class="method-get method-badge px-3 py-1 text-sm">GET</span>
                    <code class="text-lg font-mono bg-slate-100 text-slate-700 px-4 py-2 rounded-md">/cart</code>
                </div>

                <div class="mt-10 p-6 bg-white rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold text-sky-800 mb-4">Try It Out</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <p class="text-sm text-slate-600 mb-4">This endpoint has no parameters. Click the button to get the current cart state.</p>
                            <button id="send-get-cart" class="w-full bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-all duration-200 transform hover:scale-[1.02]">Send Request</button>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-slate-700 mb-2">Response</p>
                            <pre class="code-block"><code id="get-cart-response"><span class="token-info">{
  "info": "Click 'Send Request' to see a sample response."
}</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Endpoint: Add to Cart -->
            <div id="post-cart-add" class="api-content-panel hidden">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900">Add Product to Cart</h2>
                    <p class="mt-2 text-slate-600 max-w-3xl">This section lets you simulate adding a product to the shopping cart. The API expects a `product_id` and a `quantity`. The "Try It Out" console below is pre-populated with valid product IDs from our mock data. After adding an item, you can check the updated cart using the `GET /cart` endpoint.</p>
                </div>
                <div class="flex items-center space-x-3 mb-4">
                    <span class="method-post method-badge px-3 py-1 text-sm">POST</span>
                    <code class="text-lg font-mono bg-slate-100 text-slate-700 px-4 py-2 rounded-md">/cart/add</code>
                </div>

                <div class="mt-8">
                    <h3 class="text-xl font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-4">Request Body</h3>
                     <div class="text-sm space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-2 items-start py-2">
                            <div class="font-semibold text-slate-800">product_id <span class="text-red-500 ml-1 text-xs font-mono">*required</span></div>
                            <div class="md:col-span-3 text-slate-600">The <code class="bg-slate-200 text-slate-800 px-1.5 py-0.5 text-xs rounded">integer</code> ID of the product. (e.g., 101, 205, 301, 402)</div>
                        </div>
                         <div class="grid grid-cols-1 md:grid-cols-4 gap-2 items-start py-2 border-t border-slate-200/60">
                            <div class="font-semibold text-slate-800">quantity <span class="text-red-500 ml-1 text-xs font-mono">*required</span></div>
                            <div class="md:col-span-3 text-slate-600">The <code class="bg-slate-200 text-slate-800 px-1.5 py-0.5 text-xs rounded">integer</code> number of items to add.</div>
                        </div>
                    </div>
                </div>

                <div class="mt-10 p-6 bg-white rounded-lg border border-slate-200 shadow-sm">
                    <h3 class="text-xl font-bold text-sky-800 mb-4">Try It Out</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <div class="mb-4">
                                <label for="post-cart-add-product-id" class="block text-sm font-medium text-slate-700 mb-2">Product ID</label>
                                <input type="number" id="post-cart-add-product-id" value="101" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-sky-300 focus:border-sky-400 transition">
                            </div>
                            <div class="mb-4">
                                <label for="post-cart-add-quantity" class="block text-sm font-medium text-slate-700 mb-2">Quantity</label>
                                <input type="number" id="post-cart-add-quantity" value="1" class="w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm focus:ring-2 focus:ring-sky-300 focus:border-sky-400 transition">
                            </div>
                            <button id="send-post-cart-add" class="w-full bg-sky-600 text-white font-semibold py-2.5 px-4 rounded-md hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-all duration-200 transform hover:scale-[1.02]">Send Request</button>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-slate-700 mb-2">Response</p>
                            <pre class="code-block"><code id="post-cart-add-response"><span class="token-info">{
  "info": "Click 'Send Request' to see a sample response."
}</span></code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mockData = {
                products: [
                    { id: 101, name: "Smartphone", category: "electronics", price: 699.99, in_stock: true },
                    { id: 102, name: "Laptop", category: "electronics", price: 1299.99, in_stock: true },
                    { id: 103, name: "Wireless Headphones", category: "electronics", price: 199.99, in_stock: false },
                    { id: 205, name: "T-Shirt", category: "apparel", price: 19.99, in_stock: true },
                    { id: 206, name: "Jeans", category: "apparel", price: 89.99, in_stock: true },
                    { id: 301, name: "Sci-Fi Novel", category: "books", price: 15.99, in_stock: true },
                    { id: 302, name: "Cookbook", category: "books", price: 24.99, in_stock: true },
                    { id: 401, name: "Coffee Mug", category: "homegoods", price: 12.50, in_stock: true },
                    { id: 402, name: "Scented Candle", category: "homegoods", price: 18.00, in_stock: false },
                    { id: 403, name: "Desk Lamp", category: "homegoods", price: 45.00, in_stock: true }
                ],
                cart: {
                    items: [],
                    total_price: 0
                }
            };

            const navLinks = document.querySelectorAll('#api-nav a');
            const contentPanels = document.querySelectorAll('.api-content-panel');

            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    const targetId = link.getAttribute('data-target');
                    contentPanels.forEach(panel => {
                        panel.classList.toggle('hidden', panel.id !== targetId);
                    });
                });
            });

            const syntaxHighlight = (json) => {
                if (typeof json != 'string') {
                    json = JSON.stringify(json, undefined, 2);
                }
                json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                    let cls = 'token-number';
                    if (/^"/.test(match)) {
                        if (/:$/.test(match)) {
                            cls = 'token-key';
                        } else {
                            cls = 'token-string';
                        }
                    } else if (/true|false/.test(match)) {
                        cls = 'token-boolean';
                    } else if (/null/.test(match)) {
                        cls = 'token-null';
                    }
                    return '<span class="' + cls + '">' + match + '</span>';
                });
            }

            const displayJSON = (element, data) => {
                element.innerHTML = syntaxHighlight(data);
            };

            const getProductsBtn = document.getElementById('send-get-products');
            const getProductsCategoryInput = document.getElementById('get-products-category');
            const getProductsResponseEl = document.getElementById('get-products-response');

            getProductsBtn.addEventListener('click', () => {
                const category = getProductsCategoryInput.value.trim().toLowerCase();
                const result = category ? mockData.products.filter(p => p.category === category) : mockData.products;
                displayJSON(getProductsResponseEl, result);
});

            const getCartBtn = document.getElementById('send-get-cart');
            const getCartResponseEl = document.getElementById('get-cart-response');

            const updateCartState = () => {
                const total = mockData.cart.items.reduce((sum, item) => sum + item.price * item.quantity, 0);
                mockData.cart.total_price = parseFloat(total.toFixed(2));
                return mockData.cart;
            };

            getCartBtn.addEventListener('click', () => {
                displayJSON(getCartResponseEl, updateCartState());
            });

            const postCartAddBtn = document.getElementById('send-post-cart-add');
            const productIdInput = document.getElementById('post-cart-add-product-id');
            const quantityInput = document.getElementById('post-cart-add-quantity');
            const postCartAddResponseEl = document.getElementById('post-cart-add-response');

            postCartAddBtn.addEventListener('click', () => {
                const productId = parseInt(productIdInput.value);
                const quantity = parseInt(quantityInput.value);

                if (isNaN(productId) || isNaN(quantity) || quantity <= 0) {
                    displayJSON(postCartAddResponseEl, { error: "Invalid product_id or quantity." });
                    return;
                }

                const product = mockData.products.find(p => p.id === productId);

                if (!product) {
                    displayJSON(postCartAddResponseEl, { error: "Product not found." });
                    return;
                }
                
                if (!product.in_stock) {
                    displayJSON(postCartAddResponseEl, { error: "Product is out of stock." });
                    return;
                }

                const existingItem = mockData.cart.items.find(item => item.product_id === productId);
                if (existingItem) {
                    existingItem.quantity += quantity;
                } else {
                    mockData.cart.items.push({
                        product_id: product.id,
                        name: product.name,
                        quantity: quantity,
                        price: product.price
                    });
                }
                
                const response = {
                    message: "Product added to cart successfully.",
                    cart: updateCartState()
                };
                displayJSON(postCartAddResponseEl, response);
            });
        });
    </script>
</body>
</html>
